<!DOCTYPE html>
<html>
<head>
    <title>Asynchronous Loading </title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body, #map_canvas {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body>
    <div id="newpagegeo" data-role="page">

        <script type="text/javascript">

            $("#newpagegeo").bind("pageshow", function (event) {
                loadScript();
            });

            function initialize() {

                try {
                    var latLong = new google.maps.LatLng(27.985856, -81.959907);
                    var mapOptions = {
                        zoom: 14,
                        center: latLong,
                        mapTypeId: google.maps.MapTypeId.ROADMAP,
                        backgroundColor: '#ffffff',
                        noClear: true,
                        disableDefaultUI: false,
                        keyboardShortcuts: true,
                        disableDoubleClickZoom: false,
                        draggable: true,
                        scrollwheel: true,
                        draggableCursor: 'pointer',
                        draggingCursor: 'crosshair',
                        mapTypeControl: true,
                        //mapTypeControlOptions: {
                        //    style: google.maps.MapTypeControlStyle.HORIZONTAL_MENU,
                        //    position: google.maps.ControlPosition.TOP_LEFT,
                        //    mapTypeIds: [
                        //        google.maps.MapTypeId.ROADMAP
                        //    ]
                        //},
                        navigationControl: true,
                        streetViewControl: true,
                        navigationControlOptions: {
                            position: google.maps.ControlPosition.TOP_LEFT,
                            style: google.maps.NavigationControlStyle.ANDROID
                        },
                        scaleControl: true,
                        scaleControlOptions: {
                            position: google.maps.ControlPosition.TOP_LEFT,
                            style: google.maps.ScaleControlStyle.DEFAULT
                        }
                    };

                    var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);

                    var marker = new google.maps.Marker({
                        position: latLong,
                        map: map,
                        animation: google.maps.Animation.BOUNCE,
                        title: 'Insight Risk Technologies, LLC',
                        icon: 'https://www.chancesrmis.com/um-usa/img/Logos/chancesr.jpg',
                        cursor: 'pointer',
                        draggable: true
                    });

                    alert('visualizando mapa');

                } catch (ex) {
                    alert(ex.message);
                }
            }

            function loadScript() {
                //var script = document.createElement('script');
                //script.type = 'text/javascript';
                //script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&callback=initialize';
                //document.body.appendChild(script);

                var googleMaps = document.createElement("script");
                googleMaps.type = "text/javascript";
                googleMaps.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyBcJzo8GpAqy76BGtYfEtWkTe6WOLyXe_k&sensor=true&callback=initialize";
                document.body.appendChild(googleMaps);


                //var s = document.createElement("script");
                //s.type = "text/javascript";
                //s.src = "http://maps.google.com/maps/api/js?v=3&sensor=true&callback=gmap_draw";
                //window.gmap_draw = function () {
                //    alert("Callback code here");

                //    var mapOptions = {
                //        zoom: 8,
                //        center: new google.maps.LatLng(-34.397, 150.644)
                //    };

                //    alert('entro 5');
                //    var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

                //};
                //$("head").append(s);
                        
            }


        </script>

        <div data-role="header" data-position="fixed" style="background-color:#0065B3">
            <a class="ui-btn ui-shadow ui-corner-all ui-icon-arrow-l ui-btn-icon-left" href="index.html"></a>
        </div>

        <div id="container">
            <div id="map_canvas"></div>
        </div>

    </div>
</body>
</html>