<!DOCTYPE html>
<html>
<head>
    <title>Asynchronous Loading</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
        html, body, #map-canvas {
            height: 100%;
            margin: 0px;
            padding: 0px;
        }
    </style>
</head>
<body>
    <div id="newpagegeo" data-role="page">

        <script type="text/javascript">

            $("#newpagegeo").bind("pageshow", function (event) {
                alert('entro 1');
                loadScript();
            });

            function initialize() {
                alert('entro 4');
                var mapOptions = {
                    zoom: 8,
                    center: new google.maps.LatLng(-34.397, 150.644)
                };
                alert('entro 5');
                var map = new google.maps.Map(document.getElementById('map-canvas'),
                    mapOptions);
            }

            function loadScript() {
                alert('entro 2');
                //var script = document.createElement('script');
                //script.type = 'text/javascript';
                //script.src = 'https://maps.googleapis.com/maps/api/js?v=3.exp&signed_in=true&callback=initialize';
                //document.body.appendChild(script);

                var googleMaps = document.createElement("script");
                googleMaps.type = "text/javascript";
                googleMaps.src = "http://maps.googleapis.com/maps/api/js?key=AIzaSyBMFu3Bx3jFMi-3sDp-uj7q-TrQbGAZF9g&sensor=true&callback=initialize";
                document.body.appendChild(googleMaps);


                //var s = document.createElement("script");
                //s.type = "text/javascript";
                //s.src = "http://maps.google.com/maps/api/js?v=3&sensor=true&callback=gmap_draw";
                //window.gmap_draw = function () {
                //    alert("Callback code here");

                //    var mapOptions = {
                //        zoom: 8,
                //        center: new google.maps.LatLng(-34.397, 150.644)
                //    };

                //    alert('entro 5');
                //    var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);

                //};
                //$("head").append(s);
                        
                alert('entro 3');
            }


        </script>

        <div data-role="header" data-position="fixed" style="background-color:#0065B3">
            <a class="ui-btn ui-shadow ui-corner-all ui-icon-arrow-l ui-btn-icon-left" href="index.html"></a>
        </div>

        <div id="container">
            <div id="map-canvas"></div>
        </div>

    </div>
</body>
</html>